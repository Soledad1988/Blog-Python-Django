{% extends "home.html" %}
{% load colaborador_tags %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/usuarios.css' %}">
{% endblock %}

{% block content %}

<div class="usuarios-container">

    {% if user.is_superuser or request.user|has_group:"Colaborador" %}

        <h2 class="usuarios-title">Lista de usuarios</h2>

        <div class="usuarios-list">

            {% for usuario in usuarios %}
            <div class="usuario-card">

                <div class="usuario-info">
                    <span class="usuario-nombre">
                        {{ usuario.username }}
                    </span>

                    {% if usuario.username == request.user.username %}
                        <span class="usuario-usted">(Usted)</span>
                    {% endif %}
                </div>

                {% if user.is_superuser or request.user|has_group:"Colaborador" %}
                    <a href="{% url 'apps.usuario:usuario_delete' pk=usuario.id %}" class="btn-eliminar">
                        Eliminar
                    </a>
                {% endif %}

            </div>
            {% empty %}
                <p class="sin-usuarios">No hay usuarios registrados.</p>
            {% endfor %}

        </div>

    {% else %}
        <div class="usuarios-restringido">
            <h3>Acceso restringido</h3>
            <p>Solo usuarios con permisos pueden acceder a esta p√°gina.</p>
        </div>
    {% endif %}

</div>

{% endblock %}
